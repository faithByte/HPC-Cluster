---

- name: DNS Firewall Setup
  ansible.posix.firewalld:
    service: dns
    permanent: true
    state: enabled
    immediate: true
  when: 
    - ansible_facts.services is defined
    - ansible_facts.services['firewalld.service'] is defined
    - ansible_facts.services['firewalld.service'].state == 'running'